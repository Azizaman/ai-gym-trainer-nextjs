{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///home/aziz-aman/Desktop/codes/projects/fitness-agent-next/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport { PrismaLibSql } from \"@prisma/adapter-libsql\";\nimport path from \"path\";\n\nfunction createPrismaClient() {\n    const dbPath = path.resolve(process.cwd(), \"dev.db\");\n    const adapter = new PrismaLibSql({ url: `file:${dbPath}` });\n    return new PrismaClient({ adapter });\n}\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClient | undefined;\n};\n\nexport const prisma = globalForPrisma.prisma ?? createPrismaClient();\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEA,SAAS;IACL,MAAM,SAAS,4GAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;IAC3C,MAAM,UAAU,IAAI,yLAAY,CAAC;QAAE,KAAK,CAAC,KAAK,EAAE,QAAQ;IAAC;IACzD,OAAO,IAAI,sMAAY,CAAC;QAAE;IAAQ;AACtC;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///home/aziz-aman/Desktop/codes/projects/fitness-agent-next/src/lib/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\nimport Credentials from \"next-auth/providers/credentials\";\nimport Google from \"next-auth/providers/google\";\nimport { PrismaAdapter } from \"@auth/prisma-adapter\";\nimport { prisma } from \"@/lib/prisma\";\nimport bcrypt from \"bcryptjs\";\n\nexport const { handlers, auth, signIn, signOut } = NextAuth({\n    adapter: PrismaAdapter(prisma),\n    session: { strategy: \"jwt\" },\n    pages: {\n        signIn: \"/login\",\n    },\n    providers: [\n        Google({\n            clientId: process.env.GOOGLE_CLIENT_ID!,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n        }),\n        Credentials({\n            name: \"credentials\",\n            credentials: {\n                email: { label: \"Email\", type: \"email\" },\n                password: { label: \"Password\", type: \"password\" },\n            },\n            async authorize(credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n\n                const user = await prisma.user.findUnique({\n                    where: { email: credentials.email as string },\n                });\n\n                if (!user || !user.password) {\n                    return null;\n                }\n\n                const isValid = await bcrypt.compare(\n                    credentials.password as string,\n                    user.password\n                );\n\n                if (!isValid) {\n                    return null;\n                }\n\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image,\n                };\n            },\n        }),\n    ],\n    callbacks: {\n        async jwt({ token, user }) {\n            if (user) {\n                token.id = user.id;\n            }\n            return token;\n        },\n        async session({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id as string;\n            }\n            return session;\n        },\n    },\n});\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,kKAAQ,EAAC;IACxD,SAAS,IAAA,uKAAa,EAAC,gIAAM;IAC7B,SAAS;QAAE,UAAU;IAAM;IAC3B,OAAO;QACH,QAAQ;IACZ;IACA,WAAW;QACP,IAAA,kMAAM,EAAC;YACH,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAClD;QACA,IAAA,uMAAW,EAAC;YACR,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,MAAM,WAAU,WAAW;gBACvB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBAC/C,OAAO;gBACX;gBAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACtC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAW;gBAChD;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBACzB,OAAO;gBACX;gBAEA,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAChC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGjB,IAAI,CAAC,SAAS;oBACV,OAAO;gBACX;gBAEA,OAAO;oBACH,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;gBACrB;YACJ;QACJ;KACH;IACD,WAAW;QACP,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,EAAE,GAAG,KAAK,EAAE;YACtB;YACA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,QAAQ,IAAI,EAAE;gBACd,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;YAC9B;YACA,OAAO;QACX;IACJ;AACJ"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///home/aziz-aman/Desktop/codes/projects/fitness-agent-next/src/app/api/analyses/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { auth } from \"@/lib/auth\";\nimport { prisma } from \"@/lib/prisma\";\n\nexport async function GET() {\n    try {\n        const session = await auth();\n        if (!session?.user?.id) {\n            return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n        }\n\n        const analyses = await prisma.analysisHistory.findMany({\n            where: { userId: session.user.id },\n            orderBy: { createdAt: \"desc\" },\n            select: {\n                id: true,\n                exerciseType: true,\n                fitnessLevel: true,\n                score: true,\n                isFormCorrect: true,\n                exerciseDetected: true,\n                summary: true,\n                createdAt: true,\n            },\n        });\n\n        return NextResponse.json({ success: true, data: analyses });\n    } catch (error) {\n        console.error(\"Error fetching analyses:\", error);\n        return NextResponse.json(\n            { success: false, error: \"Failed to fetch analyses\" },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,UAAU,MAAM,IAAA,4HAAI;QAC1B,IAAI,CAAC,SAAS,MAAM,IAAI;YACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,MAAM,WAAW,MAAM,gIAAM,CAAC,eAAe,CAAC,QAAQ,CAAC;YACnD,OAAO;gBAAE,QAAQ,QAAQ,IAAI,CAAC,EAAE;YAAC;YACjC,SAAS;gBAAE,WAAW;YAAO;YAC7B,QAAQ;gBACJ,IAAI;gBACJ,cAAc;gBACd,cAAc;gBACd,OAAO;gBACP,eAAe;gBACf,kBAAkB;gBAClB,SAAS;gBACT,WAAW;YACf;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAS;IAC7D,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,SAAS;YAAO,OAAO;QAA2B,GACpD;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}